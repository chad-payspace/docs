---
title: "API Authentication"
description: "Secure your PayPer API integrations with modern bearer token authentication"
icon: "shield-check"
---

## Overview

PayPer uses industry-standard **Bearer Token authentication** to secure all API requests. Every call to our payment processing endpoints must include a valid authorization token to ensure your transactions remain protected and compliant.

<Note>
**Security First**: All API requests must be made over HTTPS with a valid bearer token. HTTP requests will be automatically rejected.
</Note>

## Quick Start

<Steps>
  <Step title="Get Your Token">
    Obtain your bearer token from the PayPer dashboard or through our authentication endpoint
  </Step>
  <Step title="Set Authorization Header">
    Include your token in every API request using the `Authorization: Bearer {token}` header
  </Step>
  <Step title="Make Secure Requests">
    All endpoints are now accessible with proper authentication
  </Step>
</Steps>

## Authentication Methods

<CardGroup cols={2}>
  <Card title="Bearer Token" icon="key" href="#bearer-authentication">
    JWT-based tokens for secure API access with automatic expiration
  </Card>
  <Card title="OAuth 2.0" icon="shield" href="#oauth-implementation">
    Industry-standard OAuth flows for third-party integrations
  </Card>
</CardGroup>

## Bearer Authentication

### What is Bearer Authentication?

Bearer authentication is an HTTP authentication scheme that uses security tokens called **bearer tokens**. The name "Bearer authentication" means "give access to the bearer of this token."

The bearer token is a cryptographic string generated by PayPer in response to authentication. Your application must send this token in the Authorization header for all API requests:

<CodeGroup>
```bash cURL
curl -X POST https://sandbox.pp.paybilt.com/api/v2/payment/ \
  -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..." \
  -H "Content-Type: application/json" \
  -d '{
    "amount": 100.00,
    "currency": "CAD"
  }'
```

```javascript Node.js
const response = await fetch('https://sandbox.pp.paybilt.com/api/v2/payment/', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    amount: 100.00,
    currency: 'CAD'
  })
});
```

```php PHP
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, 'https://sandbox.pp.paybilt.com/api/v2/payment/');
curl_setopt($ch, CURLOPT_HTTPHEADER, [
    'Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
    'Content-Type: application/json'
]);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    'amount' => 100.00,
    'currency' => 'CAD'
]));
$response = curl_exec($ch);
```

```python Python
import requests

headers = {
    'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...',
    'Content-Type': 'application/json'
}

data = {
    'amount': 100.00,
    'currency': 'CAD'
}

response = requests.post(
    'https://sandbox.pp.paybilt.com/api/v2/payment/',
    headers=headers,
    json=data
)
```
</CodeGroup>

### Token Structure

PayPer uses **JSON Web Tokens (JWT)** as bearer tokens. These structured tokens contain:

<Accordion title="JWT Token Components">
  <AccordionItem title="Header">
    Contains the token type and signing algorithm
    ```json
    {
      "alg": "HS256",
      "typ": "JWT"
    }
    ```
  </AccordionItem>
  
  <AccordionItem title="Payload">
    Contains user information and permissions
    ```json
    {
      "UserId": "6841ac75acff762ebd40ef8d",
      "Env": "sandbox",
      "SiteId": 323,
      "iat": 1749217004,
      "exp": 1906897004
    }
    ```
  </AccordionItem>
  
  <AccordionItem title="Signature">
    Cryptographic signature ensuring token integrity
  </AccordionItem>
</Accordion>

## Environment Setup

<Tabs>
  <Tab title="Sandbox">
    **Base URL**: `https://sandbox.pp.paybilt.com/api/v2/`
    
    Use sandbox for testing and development. All transactions are simulated and no real money is processed.
    
    <Tip>
    Sandbox tokens are prefixed with environment information for easy identification
    </Tip>
  </Tab>
  
  <Tab title="Production">
    **Base URL**: `https://api.paybilt.com/api/v2/`
    
    Production environment for live transactions. Requires valid business verification and compliance approval.
    
    <Warning>
    Always use HTTPS in production. HTTP requests will be rejected automatically.
    </Warning>
  </Tab>
</Tabs>

## Error Handling

### Authentication Failures

When authentication fails, PayPer returns standardized error responses:

<CodeGroup>
```json Invalid Token
{
  "errors": [
    {
      "code": 1001,
      "message": "Authentication failed - invalid bearer token"
    }
  ],
  "status": false
}
```

```json Missing Token
{
  "errors": [
    {
      "code": 1002,
      "message": "Authorization header required"
    }
  ],
  "status": false
}
```

```json Expired Token
{
  "errors": [
    {
      "code": 1003,
      "message": "Bearer token has expired"
    }
  ],
  "status": false
}
```
</CodeGroup>

### Common Error Codes

| Code | Description | Solution |
|------|-------------|----------|
| `1001` | Invalid bearer token | Verify token format and validity |
| `1002` | Missing authorization header | Include `Authorization: Bearer {token}` |
| `1003` | Token expired | Request a new token |
| `1004` | Insufficient permissions | Check token scope and permissions |

## Best Practices

<CardGroup cols={2}>
  <Card title="Token Security" icon="lock">
    - Store tokens securely (never in client-side code)
    - Use environment variables for token storage
    - Implement token rotation strategies
    - Monitor for token usage anomalies
  </Card>
  
  <Card title="Error Handling" icon="exclamation-triangle">
    - Always check response status codes
    - Implement retry logic for expired tokens
    - Log authentication failures for monitoring
    - Handle rate limiting gracefully
  </Card>
  
  <Card title="Performance" icon="gauge">
    - Cache valid tokens to reduce auth overhead
    - Implement connection pooling
    - Use appropriate timeout values
    - Monitor API response times
  </Card>
  
  <Card title="Compliance" icon="shield-check">
    - Always use HTTPS in production
    - Follow PCI DSS guidelines
    - Implement proper logging
    - Regular security audits
  </Card>
</CardGroup>

## Token Management

### Obtaining Tokens

<Steps>
  <Step title="Dashboard Access">
    Generate API tokens through your PayPer merchant dashboard under "API Settings"
  </Step>
  <Step title="Programmatic Access">
    Use the authentication endpoint for dynamic token generation in your applications
  </Step>
  <Step title="Token Validation">
    Verify token permissions and expiration before making API calls
  </Step>
</Steps>

### Token Lifecycle

```mermaid
graph TD
    A[Request Token] --> B[Validate Credentials]
    B --> C[Generate JWT Token]
    C --> D[Token Active]
    D --> E{Token Expired?}
    E -->|No| F[Make API Calls]
    E -->|Yes| G[Refresh Token]
    F --> E
    G --> C
```

## Testing Authentication

Use this simple test to verify your authentication setup:

<CodeGroup>
```bash Test Request
curl -X GET https://sandbox.pp.paybilt.com/api/v2/test \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json"
```

```json Success Response
{
  "message": "Authentication successful",
  "user_id": "6841ac75acff762ebd40ef8d",
  "environment": "sandbox",
  "status": true
}
```
</CodeGroup>

## Next Steps

<CardGroup cols={2}>
  <Card title="Payment Processing" icon="credit-card" href="/user-guides/etransfer">
    Start processing e-Transfer payments with your authenticated setup
  </Card>
  <Card title="Digital Cheque" icon="money-check" href="/user-guides/digital-cheque">
    Implement Digital Cheque payments for your customers
  </Card>
  <Card title="API Reference" icon="code" href="/reference/api">
    Explore our complete API documentation and endpoints
  </Card>
  <Card title="Webhooks" icon="webhook" href="/guides/webhooks">
    Set up real-time notifications for transaction updates
  </Card>
</CardGroup>

## Support

<Card title="Need Help?" icon="headset" href="mailto:technical@payper.ca">
  Our technical support team is available to help with authentication setup and troubleshooting
</Card> 